import{j as t}from"./jsx-runtime.CLpGMVip.js";import{r as c}from"./index.D15Q2Owl.js";import{B as l}from"./firebase.2mqXQHq0.js";function w({postId:e,initialLikes:u}){const[k,a]=c.useState(u||0);c.useEffect(()=>{async function s(){try{const r=Number(e)-1;if(isNaN(r)||r<0){console.error(`postId inválido: ${e}`);return}const o=`${l}/cursos/${r}/likes.json`,i=await fetch(o);if(!i.ok)throw new Error("Error al obtener los likes");const n=await i.json();a(n??0)}catch(r){console.error(`Error al obtener los likes para el post ${e}:`,r)}}s()},[e]);async function m(){try{const s=Number(e)-1;if(isNaN(s)||s<0){console.error(`postId inválido: ${e}`);return}const r=`${l}/cursos/${s}/likes.json`,o=await fetch(r);if(!o.ok)throw new Error("Error al obtener los likes");const n=(await o.json()??0)+1;if(!(await fetch(r,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)})).ok)throw new Error("Error al actualizar los likes");a(n)}catch(s){console.error(`Error al actualizar los likes para el post ${e}:`,s)}}return t.jsx("section",{className:"mt-2 text-gray-700 text-sm",children:t.jsxs("button",{onClick:m,className:"flex items-center text-gray-700 text-sm hover:text-gray-800",children:["Likes:",t.jsx("span",{className:"ml-2",children:t.jsx("strong",{children:k})}),t.jsx("img",{src:"/img/likes.png",className:"w-5 h-5 inline-block ml-2",alt:"Like icon"})]})})}export{w as default};
